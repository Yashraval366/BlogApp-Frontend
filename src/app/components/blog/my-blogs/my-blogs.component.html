
<!-- HERO / HEADER -->
<section class="myblogs-hero">
    <div class="hero-inner text-center">
        <h1 class="fw-bold">Your Blogs</h1>
        <p class="lead">Manage your published stories, ideas, and experiences.</p>
    </div>
</section>

<!-- USER STATS -->
<div class="container mt-n4">
    <div class="stats-bar shadow-sm">

        <div class="stat-item">
            <i class="fa-solid fa-file-lines stat-icon"></i>
            <div>
                <h5 class="mb-0 fw-bold">Total Blogs</h5>
                <span class="stat-value">12</span>
            </div>
        </div>

        <div class="stat-item">
            <i class="fa-solid fa-tags stat-icon"></i>
            <div>
                <h5 class="mb-0 fw-bold">Categories</h5>
                <span class="stat-value">5</span>
            </div>
        </div>

        <div class="stat-item">
            <i class="fa-solid fa-clock stat-icon"></i>
            <div>
                <h5 class="mb-0 fw-bold">Last Updated</h5>
                <span class="stat-value">Dec 5, 2025</span>
            </div>
        </div>

    </div>
</div>

<div class="masonry" *ngIf="blogStatus()?.status == 'loading'">

    <div class="masonry-item" *ngFor="let s of [1,1,1,1,1,1]">
        <div class="skeleton-card">

            <!-- Category Tag -->
            <div class="skeleton skeleton-tag"></div>

            <!-- Title -->
            <div class="skeleton skeleton-title"></div>

            <!-- Description Lines -->
            <div class="skeleton skeleton-line"></div>
            <div class="skeleton skeleton-line"></div>
            <div class="skeleton skeleton-line short"></div>

            <!-- Meta -->
            <div class="skeleton skeleton-meta"></div>

            <!-- Button -->
            <div class="skeleton skeleton-btn"></div>

        </div>
    </div>

</div>

<!-- BLOG LIST -->
<div class="container mt-4" *ngIf="blogStatus()?.status == 'success'">

    <div class="masonry">

        <!-- BLOG CARD -->
        <div class="masonry-item" *ngFor="let b of blogs()">
            <div class="myblog-card">

                <!-- Category Badge -->
                <span class="my-category-tag">
                    <i class="fa-solid fa-tag me-1"></i>{{ b.categoryName }}
                </span>
                
                <!-- VISIBILITY BADGE -->
                @if(b.blogVisibility === 0)
                {
                    <span class="visibility-badge public">
                        <i class="fa-solid fa-eye me-1"></i>Public
                    </span>
                }
                @else
                {
                    <!-- OR (for private blogs) -->
                    <span class="visibility-badge private">
                        <i class="fa-solid fa-lock me-1"></i>Private
                    </span>
                }

                
                <!-- Title -->
                <h4 class="myblog-title">{{ b.title }}</h4>
                
                <!-- Description -->
                <p class="myblog-desc">
                    {{ b.description }}
                </p>
                
                <!-- Meta -->
                <div class="myblog-meta">
                    <span><i class="fa-solid fa-calendar me-1"></i>{{ b.createdAt | date:'mediumDate' }}</span>
                </div>
                
                <!-- ACTION BAR -->
                <div class="myblog-actions">
                
                    <!-- LEFT: Engagement stats (UI only) -->
                    <div class="engagement">
                
                
                
                        <span class="eng-item like">
                            <i class="fa-regular fa-thumbs-up"></i> 24
                        </span>
                
                        <span class="eng-item comment">
                            <i class="fa-regular fa-comment-dots"></i> 8
                        </span>
                
                    </div>
                
                    <!-- RIGHT: Manage buttons -->
                    <div class="manage-actions">
                
                        <a class="manage-btn edit-btn" routerLink="/edit-blog/{{ b.id }}">
                            <i class="fa-solid fa-pen"></i>
                            <span>Edit</span>
                        </a>
                
                        <button class="manage-btn delete-btn" 
                            data-bs-toggle="modal"
                            data-bs-target="#confirmDeleteModal"
                            (click)="openDeleteModal(b.id)"
                        >
                            <i class="fa-solid fa-trash"></i>
                            <span>Delete</span>
                        </button>
                
                    </div>
                </div>
            </div>

            <!-- CONFIRM DELETE MODAL -->
            <div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-sm">
                    <div class="modal-content delete-modal">
            
                        <!-- Header -->
                        <div class="modal-header border-0">
                            <h5 class="modal-title fw-bold" id="confirmDeleteLabel">
                                <i class="fa-solid fa-triangle-exclamation text-danger me-2"></i>
                                Delete Blog
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
            
                        <!-- Body -->
                        <div class="modal-body text-center">
                            <div class="delete-icon mb-3">
                                <i class="fa-solid fa-trash"></i>
                            </div>
            
                            <p class="mb-1 fw-semibold">
                                Are you sure you want to delete this blog?
                            </p>
                            <small class="text-muted">
                                This action cannot be undone.
                            </small>
                        </div>
            
                        <!-- Footer -->
                        <div class="modal-footer border-0 justify-content-center gap-3">
                            <button type="button" class="btn btn-light px-4" data-bs-dismiss="modal">
                                Cancel
                            </button>
            
                            <!-- YES DELETE -->
                            <button type="button" class="btn btn-danger px-4" data-bs-dismiss="modal" (click)="deleteBlog()">
                                <i class="fa-solid fa-trash me-1"></i>
                                Yes, Delete
                            </button>
                        </div>
            
                    </div>
                </div>
            </div>

        </div>

    </div>

</div>